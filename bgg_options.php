<?phpinclude_once 'bgg.php';// create custom plugin settings menuadd_action('admin_menu', 'bgg_plugin_create_menu');function mlu_bgg_flush_cache() {	global $wpdb;	$table_name = mlu_bgg_query_database_table();	$query = "DELETE FROM $table_name WHERE 1=1;";	$wpdb->query($query);		}function bgg_plugin_create_menu() {	//create new top-level menu	add_menu_page('Boardgamegeek Plugin', 'MLU BGG Plugin', 'administrator', __FILE__, 'bgg_plugin_settings_page' , plugins_url('/icon.png', __FILE__) );	//call register settings function	add_action( 'admin_init', 'register_bgg_plugin_settings' );	}function register_bgg_plugin_settings() {	//register our settings	register_setting( 'bgg-plugin-settings-group', 'ApiKey' );	register_setting( 'bgg-plugin-settings-group', 'ExternalLinks' );	register_setting( 'bgg-plugin-settings-group', 'AverageWeight' );	register_setting( 'bgg-plugin-settings-group', 'AverageWeightLabel' );	register_setting( 'bgg-plugin-settings-group', 'BggRank' );	register_setting( 'bgg-plugin-settings-group', 'BggRankLabel' );	register_setting( 'bgg-plugin-settings-group', 'PlayCount' );	register_setting( 'bgg-plugin-settings-group', 'PlayCountLabel' );	register_setting( 'bgg-plugin-settings-group', 'PlayCountWithRecommendedLabel' );	register_setting( 'bgg-plugin-settings-group', 'Designers' );	register_setting( 'bgg-plugin-settings-group', 'DesignersLabel' );	register_setting( 'bgg-plugin-settings-group', 'Artists' );	register_setting( 'bgg-plugin-settings-group', 'ArtistsLabel' );	register_setting( 'bgg-plugin-settings-group', 'Publishers' );	register_setting( 'bgg-plugin-settings-group', 'PublishersLabel' );	register_setting( 'bgg-plugin-settings-group', 'Mechanisms' );	register_setting( 'bgg-plugin-settings-group', 'MechanismsLabel' );	register_setting( 'bgg-plugin-settings-group', 'Affiliate' );	register_setting( 'bgg-plugin-settings-group', 'AffiliateLabel' );	register_setting( 'bgg-plugin-settings-group', 'Image' );	register_setting( 'bgg-plugin-settings-group', 'ImageSize' );	register_setting( 'bgg-plugin-settings-group', 'ColourBlindnessLabel' );	register_setting( 'bgg-plugin-settings-group', 'VisualAccessibilityLabel' );	register_setting( 'bgg-plugin-settings-group', 'FluidIntelligenceLabel' );	register_setting( 'bgg-plugin-settings-group', 'MemoryLabel' );	register_setting( 'bgg-plugin-settings-group', 'PhysicalAccessibilityLabel' );	register_setting( 'bgg-plugin-settings-group', 'EmotionalAccessibilityLabel' );	register_setting( 'bgg-plugin-settings-group', 'SocioeconomicAccessibilityLabel' );	register_setting( 'bgg-plugin-settings-group', 'CommunicationLabel' );	register_setting( 'bgg-plugin-settings-group', 'AccessibilityLabel' );	register_setting( 'bgg-plugin-settings-group', 'SearchForLabel' );	register_setting( 'bgg-plugin-settings-group', 'GameNameLabel' );	register_setting( 'bgg-plugin-settings-group', 'NotesLabel' );	register_setting( 'bgg-plugin-settings-group', 'HeavyWeightLabel' );	register_setting( 'bgg-plugin-settings-group', 'MediumHeavyWeightLabel' );	register_setting( 'bgg-plugin-settings-group', 'MediumWeightLabel' );	register_setting( 'bgg-plugin-settings-group', 'MediumLightWeightLabel' );	register_setting( 'bgg-plugin-settings-group', 'LightWeightLabel' );	register_setting( 'bgg-plugin-settings-group', 'CollectionIncludeYear' );	register_setting( 'bgg-plugin-settings-group', 'CollectionIncludeStatus' );	register_setting( 'bgg-plugin-settings-group', 'CollectionIncludeNumPlays' );	register_setting( 'bgg-plugin-settings-group', 'CollectionIncludeComments' );	register_setting( 'bgg-plugin-settings-group', 'CollectionIncludeRating' );	register_setting( 'bgg-plugin-settings-group', 'CollectionIncludeUserRating' );	register_setting( 'bgg-plugin-settings-group', 'CollectionIncludeBggRank' );	register_setting( 'bgg-plugin-settings-group', 'Rating5' );	register_setting( 'bgg-plugin-settings-group', 'Rating45' );	register_setting( 'bgg-plugin-settings-group', 'Rating4' );	register_setting( 'bgg-plugin-settings-group', 'Rating35' );	register_setting( 'bgg-plugin-settings-group', 'Rating3' );	register_setting( 'bgg-plugin-settings-group', 'Rating25' );	register_setting( 'bgg-plugin-settings-group', 'Rating2' );	register_setting( 'bgg-plugin-settings-group', 'Rating15' );	register_setting( 'bgg-plugin-settings-group', 'Rating1' );	register_setting( 'bgg-plugin-settings-group', 'IncludeTLDR' );}function bgg_plugin_settings_page() {	if (isset ($_POST["flush"])) {			mlu_bgg_flush_cache();	}?><div class="wrap"><h1>Boardgamegeek & Meeple Like Us</h1><form method="post" action="options.php">			<a href="https://www.patreon.com/bePatron?u=130458" data-patreon-widget-type="become-patron-button">Become a Patron of Meeple Like Us!</a><script async src="https://c6.patreon.com/becomePatronButton.bundle.js"></script>	    <?php settings_fields( 'bgg-plugin-settings-group' ); ?>    <?php do_settings_sections( 'bgg-plugin-settings-group' ); ?>    <table class="form-table">	        <tr valign="top">        <th scope="row">API Key (leave blank for now)</th>        <td><input type="text" name="api_key" value="<?php echo esc_attr( get_option('api_key', "Leave blank for now") ); ?>" /></td>        </tr>        <tr valign="top">        <th scope="row">Open links in same page?</th>					<td><input name="ExternalLinks" type="checkbox" value="1" <?php checked( '1', get_option( 'ExternalLinks', 0 ) ); ?>" /></td>                </tr>				<tr>				<td><hr /></td>				</tr>				<tr>	        <th scope="row">Game Name Label</th>		        <td><input type="text" name="GameNameLabel" value="<?php echo esc_attr( get_option('GameNameLabel', "Name") ); ?>" /></td>				</tr>				<tr>	        <th scope="row">Storefront Label</th>		        <td><input type="text" name="SearchForLabel" value="<?php echo esc_attr( get_option('SearchForLabel', "Search for this game") ); ?>" /></td>				</tr>				<tr>	        <th scope="row">Weight Label (heavy)</th>		        <td><input type="text" name="HeavyWeightLabel" value="<?php echo esc_attr( get_option('HeavyWeightLabel', "Heavy") ); ?>" /></td>				</tr>				<tr>	        <th scope="row">Weight Label (medium heavy)</th>		        <td><input type="text" name="MediumHeavyWeightLabel" value="<?php echo esc_attr( get_option('MediumHeavyWeightLabel', "Medium Heavy") ); ?>" /></td>				</tr>				<tr>	        <th scope="row">Weight Label (medium)</th>		        <td><input type="text" name="MediumWeightLabel" value="<?php echo esc_attr( get_option('MediumWeightLabel', "Medium") ); ?>" /></td>				</tr>				<tr>	        <th scope="row">Weight Label (medium light)</th>		        <td><input type="text" name="MediumLightWeightLabel" value="<?php echo esc_attr( get_option('MediumLightWeightLabel', "Medium Light") ); ?>" /></td>				</tr>				<tr>	        <th scope="row">Weight Label (light)</th>		        <td><input type="text" name="LightWeightLabel" value="<?php echo esc_attr( get_option('LightWeightLabel', "Light") ); ?>" /></td>				</tr>				        <tr valign="top">        <th scope="row">Option</th>	        <th scope="row">Include</th>	        <th scope="row">Custom Label</th>					</tr>                <tr valign="top">        <th scope="row">Include Complexity</th>						<td><input name="AverageWeight" type="checkbox" value="1" <?php checked( '1', get_option( 'AverageWeight', 1 ) ); ?> /></td>        	        <td><input type="text" name="AverageWeightLabel" value="<?php echo esc_attr( get_option('AverageWeightLabel', "Complexity") ); ?>" /></td>										</tr>         <tr valign="top">        <th scope="row">Include BGG Rank</th>						<td><input name="BggRank" type="checkbox" value="1" <?php checked( '1', get_option( 'BggRank', 1 ) ); ?> /></td>        	        <td><input type="text" name="BggRankLabel" value="<?php echo esc_attr( get_option('BggRankLabel', "BGG Rank") ); ?>" /></td>				</tr>       <tr valign="top">        <th scope="row">Include Player Count</th>						<td><input name="PlayCount" type="checkbox" value="1" <?php checked( '1', get_option( 'PlayCount', 1 ) ); ?> /></td>        	        <td><input type="text" name="PlayCountLabel" value="<?php echo esc_attr( get_option('PlayCountLabel', "Player Count") ); ?>" /></td>	        <td><input type="text" name="PlayCountWithRecommendedLabel" value="<?php echo esc_attr( get_option('PlayCountWithRecommendedLabel', "Player Count (Recommended)") ); ?>" /></td>				</tr>       <tr valign="top">        <th scope="row">Include Designers</th>						<td><input name="Designers" type="checkbox" value="1" <?php checked( '1', get_option( 'Designers', 1 ) ); ?> /></td>        	        <td><input type="text" name="DesignersLabel" value="<?php echo esc_attr( get_option('DesignersLabel', "Designer(s)") ); ?>" /></td>				</tr>       <tr valign="top">        <th scope="row">Include Artists</th>						<td><input name="Artists" type="checkbox" value="1" <?php checked( '1', get_option( 'Artists', 1 ) ); ?> /></td>        	        <td><input type="text" name="ArtistsLabel" value="<?php echo esc_attr( get_option('ArtistsLabel', "Artist(s)") ); ?>" /></td>				</tr>       <tr valign="top">        <th scope="row">Include Publishers</th>						<td><input name="Publishers" type="checkbox" value="1" <?php checked( '1', get_option( 'Publishers', 1 ) ); ?> /></td>        	        <td><input type="text" name="PublishersLabel" value="<?php echo esc_attr( get_option('PublishersLabel', "Publisher(s)") ); ?>" /></td>				</tr>       <tr valign="top">        <th scope="row">Include Mechanisms</th>						<td><input name="Mechanisms" type="checkbox" value="1" <?php checked( '1', get_option( 'Mechanisms', 1 ) ); ?> /></td>        	        <td><input type="text" name="MechanismsLabel" value="<?php echo esc_attr( get_option('MechanismsLabel', "Mechanism(s)") ); ?>" /></td>				</tr>       <tr valign="top">        <th scope="row">Include MLU affiliate link</th>						<td><input name="Affiliate" type="checkbox" value="1" <?php checked( '1', get_option( 'Affiliate', 0 ) ); ?> /></td>        	        <td><input type="text" name="AffiliateLabel" value="<?php echo esc_attr( get_option('AffiliateLabel', "Buy it!") ); ?>" /></td>				</tr>       <tr valign="top">        <th scope="row">Include Image</th>						<td><input name="Image" type="checkbox" value="1" <?php checked( '1', get_option( 'Image', 1 ) ); ?> /></td>        				</tr>       <tr valign="top">        <th scope="row">Image Size (if included)</th>	        	<td>        		<select name = "ImageSize">						<option value = "25" <?php selected(get_option('ImageSize'), "25"); ?>">25%</option>						<option value = "50" <?php selected(get_option('ImageSize'), "50"); ?>">50%</option>						<option value = "75" <?php selected(get_option('ImageSize'), "75"); ?>">75%</option>						<option value = "100" <?php selected(get_option('ImageSize'), "100"); ?>">100%</option>					</td>					</select>															</tr>				<tr>				<td><hr /></td>				</tr>				<tr>	        <th scope="row">Accessibility Option</th>		        <th scope="row">Custom Label</th>					</tr>				<tr>	        <th scope="row">Accessibility Label</th>		        <td><input type="text" name="AccessibilityLabel" value="<?php echo esc_attr( get_option('AccessibilityLabel', "Accessibility Report") ); ?>" /></td>				</tr>				<tr>	        <th scope="row">Colour Blindness</th>		        <td><input type="text" name="ColourBlindnessLabel" value="<?php echo esc_attr( get_option('ColourBlindnessLabel', "Colour Blindness") ); ?>" /></td>				</tr>				<tr>	        <th scope="row">Visual Accessibility</th>		        <td><input type="text" name="VisualAccessibilityLabel" value="<?php echo esc_attr( get_option('VisualAccessibilityLabel', "Visual Accessibility") ); ?>" /></td>				</tr>				<tr>	        <th scope="row">Fluid Intelligence</th>		        <td><input type="text" name="FluidIntelligenceLabel" value="<?php echo esc_attr( get_option('FluidIntelligenceLabel', "Fluid Intelligence") ); ?>" /></td>				</tr>				<tr>	        <th scope="row">Memory</th>		        <td><input type="text" name="MemoryLabel" value="<?php echo esc_attr( get_option('MemoryLabel', "Memory") ); ?>" /></td>				</tr>				<tr>	        <th scope="row">Physical Accessibility</th>		        <td><input type="text" name="PhysicalAccessibilityLabel" value="<?php echo esc_attr( get_option('PhysicalAccessibilityLabel', "Physical Accessibility") ); ?>" /></td>				</tr>				<tr>	        <th scope="row">Emotional Accessibility</th>		        <td><input type="text" name="EmotionalAccessibilityLabel" value="<?php echo esc_attr( get_option('EmotionalAccessibilityLabel', "Emotional Accessibility") ); ?>" /></td>				</tr>				<tr>	        <th scope="row">Socioeconomic Accessibility</th>		        <td><input type="text" name="SocioeconomicAccessibilityLabel" value="<?php echo esc_attr( get_option('SocioeconomicAccessibilityLabel', "Socioeconomic Accessibility") ); ?>" /></td>				</tr>				<tr>	        <th scope="row">Communication</th>		        <td><input type="text" name="CommunicationLabel" value="<?php echo esc_attr( get_option('CommunicationLabel', "Communication") ); ?>" /></td>				</tr>				<tr>	        <th scope="row">Notes</th>		        <td><input type="text" name="NotesLabel" value="<?php echo esc_attr( get_option('NotesLabel', "Notes") ); ?>" /></td>				</tr>      				<tr valign="top">				<tr>	        <th scope="row">Collection Element</th>		        <th scope="row">Include</th>					</tr>				<tr>		      <th scope="row">Include Year</th>						<td><input name="CollectionIncludeYear" type="checkbox" value="1" <?php checked( '1', get_option( 'CollectionIncludeYear', 1 ) ); ?> /></td>        										</tr>				<tr>		      <th scope="row">Include Status</th>						<td><input name="CollectionIncludeStatus" type="checkbox" value="1" <?php checked( '1', get_option( 'CollectionIncludeStatus', 1 ) ); ?> /></td>        										</tr>				<tr>		      <th scope="row">Include Num Plays</th>						<td><input name="CollectionIncludeNumPlays" type="checkbox" value="1" <?php checked( '1', get_option( 'CollectionIncludeNumPlays', 1 ) ); ?> /></td>        										</tr>				<tr>		      <th scope="row">Include Comments</th>						<td><input name="CollectionIncludeComments" type="checkbox" value="1" <?php checked( '1', get_option( 'CollectionIncludeComments', 1 ) ); ?> /></td>        										</tr>				<tr>		      <th scope="row">Include Rating</th>						<td><input name="CollectionIncludeRating" type="checkbox" value="1" <?php checked( '1', get_option( 'CollectionIncludeRating', 1 ) ); ?> /></td>        										</tr>				<tr>		      <th scope="row">Include User Rating</th>						<td><input name="CollectionIncludeUserRating" type="checkbox" value="1" <?php checked( '1', get_option( 'CollectionIncludeUserRating', 1 ) ); ?> /></td>        										</tr>				<tr>		      <th scope="row">Include BGG Rank</th>						<td><input name="CollectionIncludeBggRank" type="checkbox" value="1" <?php checked( '1', get_option( 'CollectionIncludeBggRank', 1 ) ); ?> /></td>        										</tr>				<tr valign="top">				<tr>	        <th scope="row">Rating TLDR</th>					</tr>				<tr>		      <th scope="row">Include TLDR Text</th>						<td><input name="IncludeTLDR" type="checkbox" value="1" <?php checked( '1', get_option( 'IncludeTLDR', 1 ) ); ?> /></td>        										</tr>			<tr>	        <th scope="row">5 Star Rating Label</th>		        <td><input type="text" style="width: 600px;" name="Rating5" value="<?php echo esc_attr( get_option('Rating5', "An absolute must play!  Don't bother reading any farther, just go play it.") ); ?>" /></td>				</tr>	        <th scope="row">4.5 Star Ratin gLabel</th>		        <td><input type="text" style="width: 600px;" name="Rating45" value="<?php echo esc_attr( get_option('Rating45', "It's excellent!  You should make every possible effort to play it!") ); ?>" /></td>				</tr>	        <th scope="row">4 Star Rating Label</th>		        <td><input type="text" style="width: 600px;" name="Rating4" value="<?php echo esc_attr( get_option('Rating4', "It's great!  You should probably play it if you can!") ); ?>" /></td>				</tr>	        <th scope="row">3.5 Star Rating Label</th>		        <td><input type="text" style="width: 600px;" name="Rating35" value="<?php echo esc_attr( get_option('Rating35', "It's good! You should consider playing it if you have a chance.") ); ?>" /></td>				</tr>	        <th scope="row">3 Star Rating Label</th>		        <td><input type="text" style="width: 600px;" name="Rating3" value="<?php echo esc_attr( get_option('Rating3', "It's basically okay!") ); ?>" /></td>				</tr>	        <th scope="row">2.5 Star Rating Label</th>		        <td><input type="text" style="width: 600px;" name="Rating25" value="<?php echo esc_attr( get_option('Rating25', "It's fine, I suppose.  I guess.  Whatever.") ); ?>" /></td>				</tr>	        <th scope="row">2 Star Rating Label</th>		        <td><input type="text" style="width: 600px;" name="Rating2" value="<?php echo esc_attr( get_option('Rating2', "Definitely not for me.  Maybe not for you.") ); ?>" /></td>				</tr>	        <th scope="row">1.5 Star Rating Label</th>		        <td><input type="text" style="width: 600px;" name="Rating15" value="<?php echo esc_attr( get_option('Rating15', "Avoid, unless you want to punish your friends for some horrible infraction.") ); ?>" /></td>				</tr>	        <th scope="row">1 Star Rating Label</th>		        <td><input type="text" style="width: 600px;" name="Rating1" value="<?php echo esc_attr( get_option('Rating1', "Unremittingly awful.  If you have a copy, go burn it.") ); ?>" /></td>				</tr>    </table>    <?php submit_button(); ?>	</form>	<form method="post" action="">		<input type = "hidden" name = "action" value = "1"></input>		<?php 			submit_button('Flush Cache', 'secondary', 'flush', false); 		?>	</form></div><?php } ?>